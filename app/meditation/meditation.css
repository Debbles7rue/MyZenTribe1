/* app/meditation/meditation.css */
:root {
  --bg-1: #0c0f13;
  --bg-2: #12161c;
  --glow: #a3e6ff;
  --candle-wax: #f3ede6;
  --flame-core: #ffd27a;
  --flame-outer: rgba(255, 175, 64, 0.7);
  --halo: rgba(255, 220, 150, 0.22);
  --shelf: #151a21;
  --chip: #1b2129;
  --chip-on: #233040;
}

.mz-room { min-height: 70vh; }
.mz-scene {
  position: relative;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.06);
  overflow: hidden;
  background: radial-gradient(1200px 900px at 50% 100%, #0a0f14 15%, var(--bg-2) 60%, var(--bg-1));
  box-shadow: 0 10px 30px rgba(0,0,0,0.35) inset;
  min-height: 72vh;
}

/* Landing layout */
.mz-door-screen {
  position: absolute; inset: 0; z-index: 30;
  background: radial-gradient(1200px 800px at 50% 60%, rgba(255,255,255,0.05), rgba(0,0,0,0.7) 70%);
  backdrop-filter: blur(2px);
  display: grid; place-items: center;
}
.mz-landing-grid {
  display: grid;
  grid-template-columns: minmax(320px, 560px) minmax(320px, 520px);
  gap: 32px;
  align-items: center;
  padding: 20px;
}
@media (max-width: 980px) {
  .mz-landing-grid { grid-template-columns: 1fr; }
}

/* Awe door */
.mz-door {
  position: relative; width: 100%; height: 360px; perspective: 1200px;
  border-radius: 16px; overflow: hidden;
  background: radial-gradient(600px 300px at 50% 30%, rgba(235, 200, 120, 0.06), transparent);
  box-shadow: inset 0 0 60px rgba(0,0,0,0.6), 0 30px 60px rgba(0,0,0,0.35);
}
.mz-ancient {
  position: absolute; top: 18px; width: 100%; text-align: center;
  text-transform: uppercase; letter-spacing: 0.2em; color: #e8d6a9;
  font-weight: 700; font-size: 14px; z-index: 2; text-shadow: 0 2px 6px rgba(0,0,0,0.45);
}
.mz-door-panel {
  position: absolute; top: 0; bottom: 0; width: 50%;
  background: linear-gradient(#3b3226, #1e1a13);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: inset 0 0 40px rgba(0,0,0,0.5);
  transition: transform 1s ease-in-out; will-change: transform;
}
.mz-door-panel.left { left: 0; border-right: none; transform-origin: left; }
.mz-door-panel.right { right: 0; border-left: none; transform-origin: right; }

/* Options panel */
.mz-panel {
  background: rgba(18,22,28,0.75);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 16px;
  padding: 16px;
  color: #dce7f7;
}
.mz-panel-title { font-weight: 700; margin-bottom: 10px; }
.mz-option-group { margin: 14px 0 8px; }
.mz-label { font-size: 12px; opacity: 0.8; margin-bottom: 6px; }
.mz-cards { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.mz-card {
  position: relative; border-radius: 12px; height: 82px; border: 1px solid rgba(255,255,255,0.08);
  background: #10151b; color: #e9f1ff; cursor: pointer; overflow: hidden;
}
.mz-card span { position: absolute; left: 10px; bottom: 10px; font-size: 13px; font-weight: 600; text-shadow: 0 2px 6px rgba(0,0,0,0.5); }
.mz-card.active { outline: 2px solid #6bb7ff; }
.mz-card.room { background: radial-gradient(500px 220px at 70% 10%, rgba(255,190,120,0.1), transparent), #0e1319; }
.mz-card.beach { background: linear-gradient(#80caff, #2b7ea5 60%), url('/env/beach.jpg'); background-size: cover; background-blend-mode: overlay; }
.mz-card.lake { background: linear-gradient(#6fd2ff, #1a4663 60%), url('/env/lake.jpg'); background-size: cover; background-blend-mode: overlay; }
.mz-card.creek { background: linear-gradient(#7ed39d, #1e4a2e 60%), url('/env/creek.jpg'); background-size: cover; background-blend-mode: overlay; }
.mz-card.abstract { background: conic-gradient(from 180deg, #213, #345, #213, #345); }

.mz-chips { display: flex; flex-wrap: wrap; gap: 8px; }
.mz-chip {
  background: var(--chip); color: #dbe6f5;
  border: 1px solid rgba(255,255,255,0.08);
  padding: 6px 10px; border-radius: 999px; font-size: 12px; user-select: none; cursor: pointer;
}
.mz-chip.on { background: var(--chip-on); }
.mz-chip.muted { opacity: 0.8; }
.mz-chip.mz-volume { display: inline-flex; align-items: center; gap: 8px; }
.mz-chip.mz-volume input[type="range"] { width: 120px; }

.mz-controls { display: flex; align-items: center; gap: 10px; margin-top: 8px; }
.mz-enter-btn {
  padding: 10px 18px; border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.2);
  background: rgba(255,255,255,0.07);
  color: white; letter-spacing: 0.06em; text-transform: uppercase; font-weight: 700; cursor: pointer;
}
.mz-enter-btn.big { padding: 12px 28px; font-size: 14px; }
.mz-inline-controls { display: flex; gap: 8px; }

/* Stats */
.mz-stats { display: flex; gap: 14px; margin-top: 10px; }
.mz-stats .stat { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; padding: 10px 14px; min-width: 140px; }
.mz-stats .n { font-size: 22px; font-weight: 800; line-height: 1.1; }
.mz-stats .t { font-size: 11px; opacity: 0.85; }

/* Blessing */
.mz-door-blessing {
  margin-top: 10px; text-align: left; color: rgba(255,255,255,0.92); font-size: 12px;
}

/* Aura and base elements shared */
.mz-aura {
  position: absolute; inset: -20%;
  background:
    radial-gradient(800px 500px at 50% 90%, rgba(163,230,255,0.06), transparent 60%),
    radial-gradient(700px 400px at 20% 40%, rgba(255,215,150,0.04), transparent 60%),
    radial-gradient(700px 400px at 80% 40%, rgba(255,215,150,0.04), transparent 60%);
  pointer-events: none;
}

/* In-session HUD */
.mz-session-hud {
  position: absolute; top: 14px; right: 14px; display: flex; gap: 8px; z-index: 5;
}

/* ===== Sacred room (candles + fountain) ===== */

.mz-shelf {
  position: absolute; left: 6%; width: 88%; height: 10px;
  background: linear-gradient(#20252d, var(--shelf));
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 8px 20px rgba(0,0,0,0.5);
}
.mz-shelf.top { top: 18%; }
.mz-shelf.mid { top: 36%; }

.mz-candle-row {
  position: absolute; display: flex; gap: 36px; left: 10%; width: 80%; justify-content: space-evenly;
}
.mz-candle-row.shelf-top { top: 14%; }
.mz-candle-row.shelf-mid { top: 32%; }

.mz-candle-floor {
  position: absolute; bottom: 6%; left: 5%; width: 90%;
  display: flex; gap: min(4vw, 42px); justify-content: center; align-items: end;
}

.mz-candle { position: relative; display: inline-flex; align-items: end; justify-content: center; --h: 46px; --w: 22px; }
.mz-candle.short { --h: 40px; --w: 18px; }
.mz-candle.mid   { --h: 60px; --w: 22px; }
.mz-candle.tall  { --h: 86px; --w: 26px; }

.mz-candle .wax {
  width: var(--w); height: var(--h);
  background: linear-gradient(#fff, var(--candle-wax));
  border-radius: 6px 6px 4px 4px;
  box-shadow: inset 0 -6px 10px rgba(0,0,0,0.2), 0 6px 18px rgba(0,0,0,0.35);
}
.mz-candle .flame {
  position: absolute; bottom: calc(var(--h) + 4px);
  width: 14px; height: 22px; transform-origin: 50% 100%;
  animation: sway 3s ease-in-out infinite; display: grid; place-items: center;
}
.mz-candle .flame .core {
  width: 8px; height: 12px; border-radius: 40% 40% 60% 60%;
  background: radial-gradient(circle at 50% 35%, #fff 20%, var(--flame-core) 60%, transparent 70%);
  filter: blur(0.2px);
}
.mz-candle .flame .glow {
  position: absolute; width: 22px; height: 32px; border-radius: 50% 50% 60% 60%;
  background: radial-gradient(40% 45% at 50% 30%, var(--flame-outer), transparent 70%);
  filter: blur(1.2px); opacity: 0.9; animation: flicker 1.8s infinite;
}
.mz-candle .halo {
  position: absolute; width: 100px; height: 60px; bottom: calc(var(--h) - 2px);
  border-radius: 50%; background: radial-gradient(55% 60% at 50% 55%, var(--halo), transparent 70%);
  filter: blur(8px); opacity: 0.55; pointer-events: none;
}

/* Fountain */
.mz-fountain { position: absolute; left: 50%; top: 54%; transform: translate(-50%, -50%); width: min(44vw, 520px); height: min(44vw, 360px); display: grid; place-items: center; }
.mz-fountain .pillar {
  width: 28px; height: 120px; background: linear-gradient(#3a4956, #222c35 60%, #1a232c);
  border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; box-shadow: 0 18px 40px rgba(0,0,0,0.45);
}
.mz-fountain .stream {
  position: absolute; top: calc(50% - 40px); width: 4px; height: 180px;
  background: linear-gradient(180deg, rgba(163,230,255,0.0), rgba(163,230,255,0.4), rgba(163,230,255,0.1));
  filter: blur(0.6px); animation: flow 1.4s linear infinite;
}
.mz-fountain .stream.s1 { left: calc(50% - 40px); animation-delay: 0s; }
.mz-fountain .stream.s2 { left: 50%; animation-delay: 0.25s; }
.mz-fountain .stream.s3 { left: calc(50% + 40px); animation-delay: 0.5s; }
.mz-fountain .ripple {
  position: absolute; bottom: 8%; width: 30%; aspect-ratio: 1 / 0.2; border-radius: 50%;
  border: 1px solid rgba(163,230,255,0.35); filter: blur(0.3px); animation: ripple 3.4s ease-out infinite; opacity: 0.7;
}
.mz-fountain .ripple.r1 { animation-delay: 0s; }
.mz-fountain .ripple.r2 { animation-delay: 1.1s; }
.mz-fountain .ripple.r3 { animation-delay: 2.2s; }

/* ===== Beach ===== */
.mz-beach { position: absolute; inset: 0; }
.mz-beach .sky { position: absolute; inset: 0 0 40% 0; background: linear-gradient(#79bfff,#a9d8ff 60%, #dff0ff); }
.mz-beach .sun { position: absolute; left: 18%; top: 18%; width: 90px; height: 90px; border-radius: 50%; background: radial-gradient(#fffbc4, #ffd27a 60%, transparent 70%); filter: blur(0.4px); }
.mz-beach .sea { position: absolute; left: 0; right: 0; bottom: 20%; height: 28%; overflow: hidden; background: linear-gradient(#176287,#1a4d69); }
.mz-beach .wave { position: absolute; left: -30%; right: -30%; height: 60%; opacity: 0.7; background: radial-gradient(ellipse at top, rgba(255,255,255,0.6), transparent 60%); animation: wave 8s linear infinite; }
.mz-beach .wave.w1 { top: 0%; animation-duration: 11s; }
.mz-beach .wave.w2 { top: 15%; animation-duration: 9s; }
.mz-beach .wave.w3 { top: 28%; animation-duration: 7s; }
.mz-beach .sand { position: absolute; bottom: 0; left: 0; right: 0; height: 22%; background: linear-gradient(#f3e2b5,#e5cf95); }

/* ===== Lake ===== */
.mz-lake { position: absolute; inset: 0; }
.mz-lake .mist { position: absolute; inset: 0 0 45% 0; background: linear-gradient(#243646, #2c4256 60%, #2a3b4d); opacity: 0.9; }
.mz-lake .mounts { position: absolute; bottom: 28%; left: 0; right: 0; height: 14%; background: linear-gradient(#1d2a34,#152029); clip-path: polygon(0 100%, 0 50%, 10% 60%, 18% 52%, 34% 65%, 50% 54%, 66% 62%, 82% 50%, 100% 60%, 100% 100%); opacity: 0.9; }
.mz-lake .water { position: absolute; left: 0; right: 0; bottom: 20%; height: 28%; background: linear-gradient(#0f2c3d,#0a202b); overflow: hidden; }
.mz-lake .water .ripple { position: absolute; left: 50%; top: 50%; transform: translate(-50%,-50%); width: 20%; height: 30%; border-radius: 50%; border: 1px solid rgba(150,200,220,0.3); animation: lakeRipple 6s infinite ease-out; }
.mz-lake .water .r1 { animation-delay: 0s; }
.mz-lake .water .r2 { animation-delay: 2s; }
.mz-lake .water .r3 { animation-delay: 4s; }

/* ===== Creek ===== */
.mz-creek { position: absolute; inset: 0; }
.mz-creek .trees { position: absolute; inset: 0 0 55% 0; background: linear-gradient(#123522,#0c2518); }
.mz-creek .stream { position: absolute; left: 0; right: 0; bottom: 20%; height: 30%; background: linear-gradient(#0c2c2f,#0a1f23); overflow: hidden; }
.mz-creek .flow { position: absolute; top: 10%; bottom: 10%; width: 6%; background: linear-gradient(180deg, rgba(120,210,230,0.2), rgba(120,210,230,0.7) 40%, rgba(120,210,230,0.2)); filter: blur(0.4px); animation: creekFlow 3.6s linear infinite; }
.mz-creek .flow.f0 { left: 10%; animation-delay: 0s; }
.mz-creek .flow.f1 { left: 18%; animation-delay: 0.4s; }
.mz-creek .flow.f2 { left: 26%; animation-delay: 0.8s; }
.mz-creek .flow.f3 { left: 34%; animation-delay: 1.2s; }
.mz-creek .flow.f4 { left: 42%; animation-delay: 1.6s; }
.mz-creek .flow.f5 { left: 50%; animation-delay: 2.0s; }
.mz-creek .flow.f6 { left: 58%; animation-delay: 2.4s; }
.mz-creek .flow.f7 { left: 66%; animation-delay: 2.8s; }

/* ===== Abstract ===== */
.mz-abstract { position: absolute; inset: 0; display: grid; place-items: center; background: radial-gradient(1200px 900px at 50% 80%, #080a0d, #090d12); }
.mz-abstract .swirl {
  position: absolute; width: 140vmax; height: 140vmax;
  background: conic-gradient(from 0deg, #112, #236, #112, #236, #112);
  mix-blend-mode: screen; opacity: 0.12; animation: swirl 40s linear infinite;
  border-radius: 50%;
}
.mz-abstract .s2 { animation-duration: 60s; opacity: 0.16; }
.mz-abstract .s3 { animation-duration: 80s; opacity: 0.1; }
.mz-abstract .s4 { animation-duration: 100s; opacity: 0.08; }

/* Animations */
@keyframes sway { 0% { transform: rotate(0.8deg); } 50% { transform: rotate(-0.8deg); } 100% { transform: rotate(0.8deg); } }
@keyframes flicker { 0%,100% { opacity: 0.85; transform: scaleY(1); } 40% { opacity: 0.95; transform: scaleY(1.06); } 60% { opacity: 0.75; transform: scaleY(0.96); } }
@keyframes flow { 0% { transform: translateY(-40%); opacity: 0; } 15% { opacity: 1; } 85% { opacity: 1; } 100% { transform: translateY(50%); opacity: 0; } }
@keyframes ripple { 0% { transform: scale(0.6); opacity: 0.5; } 100% { transform: scale(1.2); opacity: 0.0; } }
@keyframes wave { 0% { transform: translateX(0); } 100% { transform: translateX(30%); } }
@keyframes lakeRipple { 0% { transform: translate(-50%,-50%) scale(0.7); opacity: 0.7; } 100% { transform: translate(-50%,-50%) scale(1.35); opacity: 0; } }
@keyframes creekFlow { 0% { transform: translateY(-20%); } 100% { transform: translateY(40%); } }
@keyframes swirl { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
