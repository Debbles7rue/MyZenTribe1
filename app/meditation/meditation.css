/* app/meditation/meditation.css â€” Image-backed grand doors + scenes */

/* palette */
:root{
  --bg-1:#0f1216; --bg-2:#13171c;
  --panel-bg:rgba(20,22,26,.84); --panel-edge:rgba(255,255,255,.08);
  --gold-ink:#f0e3c2;
  --candle-wax:#f4eee4; --flame-core:#ffd89a; --flame-outer:rgba(255,184,86,.75); --halo:rgba(255,218,140,.22);
}
.muted{opacity:.75}

/* page layout */
.mz-page{display:grid;gap:18px}
.mz-title{font-weight:900;letter-spacing:.05em;margin:6px 0 0}

/* shell + scene */
.mz-scene-shell{position:relative;border-radius:16px;overflow:hidden;border:1px solid var(--panel-edge)}
.mz-scene{position:relative;min-height:78vh;background:radial-gradient(1200px 900px at 50% 100%,#0a0e12 15%,var(--bg-2) 60%,var(--bg-1))}
.mz-aura{position:absolute;inset:-20%;pointer-events:none;filter:saturate(.9) blur(.4px);opacity:.52;
  background:radial-gradient(800px 520px at 50% 88%,rgba(245,225,180,.12),transparent 60%);
}

/* Background image layer (uses --bg-img) */
.mz-bg-img{position:absolute;inset:0;background-image:var(--bg-img);background-size:cover;background-position:center;opacity:.9;filter:saturate(.92)}

/* door group */
.mz-doorgroup{position:absolute;inset:0;display:grid;place-items:center}
.mz-doorgroup.is-open .mz-door{opacity:0;pointer-events:none;transition:opacity .6s ease .9s}
.mz-doorgroup.is-open .mz-choices{pointer-events:none;opacity:0;transition:opacity .35s ease}

.mz-door{position:absolute;inset:12% 10%;border-radius:18px;display:grid;place-items:center;perspective:1400px;transition:opacity .35s ease}
.mz-ancient{position:absolute;top:24px;width:100%;text-align:center;text-transform:uppercase;letter-spacing:.22em;color:var(--gold-ink);font-weight:800;font-size:14px;text-shadow:0 2px 6px rgba(0,0,0,.45);z-index:3}
.mz-door-candles{position:absolute;top:16%;left:10%;right:10%;display:flex;justify-content:space-between;z-index:2}
.mz-door-candles .dc{filter:drop-shadow(0 8px 20px rgba(255,200,120,.26))}
.mz-door-panel{position:absolute;top:0;bottom:0;width:50%;
  background:
    linear-gradient(rgba(0,0,0,.35), rgba(0,0,0,.54)),
    var(--door-texture, linear-gradient(#3b3124,#241d15));
  background-size:cover;background-position:center;
  border:1px solid var(--panel-edge);box-shadow:inset 0 0 40px rgba(0,0,0,.55);
  transition:transform 1s ease-in-out
}
.mz-door-panel.left{left:0;transform-origin:left}
.mz-door-panel.right{right:0;transform-origin:right}
.mz-doorgroup.is-open .mz-door-panel.left{transform:rotateY(-78deg)}
.mz-doorgroup.is-open .mz-door-panel.right{transform:rotateY(78deg)}

/* choices */
.mz-choices{position:absolute;top:18%;width:280px;display:flex;flex-direction:column;gap:12px}
.mz-choices.left{left:22px}
.mz-choices.right{right:22px}
.mz-choice{position:relative;display:flex;align-items:center;gap:12px;padding:10px 12px;background:rgba(17,21,26,.88);border:1px solid var(--panel-edge);border-radius:12px;color:#eef4ff;cursor:pointer}
.mz-choice .label{font-weight:700;font-size:13px;text-align:left}
.mz-choice .flame{position:relative;width:22px;height:28px;display:grid;place-items:center}
.mz-choice .glow{position:absolute;width:22px;height:28px;border-radius:50% 50% 60% 60%;background:radial-gradient(40% 45% at 50% 30%,var(--flame-outer),transparent 70%);filter:blur(1px);opacity:.9;animation:flicker 1.8s infinite}
.mz-choice .core{position:relative;width:10px;height:14px;border-radius:40% 40% 60% 60%;background:radial-gradient(circle at 50% 35%,#fff 22%,var(--flame-core) 60%,transparent 72%)}

/* HUD */
.mz-session-hud{position:absolute;top:14px;right:14px;display:flex;gap:8px;z-index:6}
.mz-chip{background:#141b22;border:1px solid rgba(255,255,255,.12);color:#e6f0ff;padding:8px 12px;border-radius:10px;cursor:pointer}

/* -- SOUND CONTROLS -- */
.mz-controls{position:absolute;left:14px;bottom:14px;z-index:7;background:var(--panel-bg);border:1px solid var(--panel-edge);border-radius:12px;padding:10px 12px;backdrop-filter:blur(6px);display:inline-flex}
.mz-controls .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.mz-controls .pill{background:#1a232b;border:1px solid rgba(255,255,255,.1);color:#e6f0ff;padding:8px 12px;border-radius:999px;cursor:pointer}
.mz-controls .pill.active{background:#24303a}
.mz-controls .select-wrap{display:flex;gap:6px;align-items:center;margin-left:6px}
.mz-controls .select{background:#1a232b;color:#e6f0ff;border:1px solid rgba(255,255,255,.12);border-radius:8px;padding:6px 10px}
.mz-controls .vol-wrap{display:flex;gap:6px;align-items:center;margin-left:8px}
.mz-controls input[type="range"]{accent-color:#d7c69b;width:140px}

/* sacred room overlays */
.mz-room{position:absolute;inset:0}
.mz-room .shelves .shelf{position:absolute;left:8%;width:84%;height:10px;background:linear-gradient(#242a31,#151a20);border:1px solid var(--panel-edge);box-shadow:0 8px 20px rgba(0,0,0,.5)}
.mz-room .shelves .top{top:22%}
.mz-room .shelves .mid{top:38%}
.mz-room .shelves .candles{position:absolute;left:10%;right:10%;top:26%;display:flex;gap:42px;justify-content:center}
.candle{--h:60px;--w:22px;position:relative;display:inline-flex;align-items:end;justify-content:center}
.candle.short{--h:40px;--w:18px}.candle.tall{--h:86px;--w:26px}
.candle .wax{width:var(--w);height:var(--h);background:linear-gradient(#fff,var(--candle-wax));border-radius:6px 6px 4px 4px;box-shadow:inset 0 -6px 10px rgba(0,0,0,.22),0 6px 18px rgba(0,0,0,.36)}
.candle .flame{position:absolute;bottom:calc(var(--h) + 4px);width:14px;height:22px;transform-origin:50% 100%;animation:sway 3s ease-in-out infinite;display:grid;place-items:center}
.candle .glow{position:absolute;width:22px;height:32px;border-radius:50% 50% 60% 60%;background:radial-gradient(40% 45% at 50% 30%,var(--flame-outer),transparent 70%);filter:blur(1.1px);opacity:.94;animation:flicker 1.8s infinite}
.candle .core{width:8px;height:12px;border-radius:40% 40% 60% 60%;background:radial-gradient(circle at 50% 35%,#fff 22%,var(--flame-core) 60%,transparent 72%)}
.candle .halo{position:absolute;width:100px;height:60px;bottom:calc(var(--h) - 2px);border-radius:50%;background:radial-gradient(55% 60% at 50% 55%,var(--halo),transparent 70%);filter:blur(8px);opacity:.55;pointer-events:none}

.mz-room .fountain{position:absolute;left:50%;top:58%;transform:translate(-50%,-50%);width:min(44vw,520px);height:min(44vw,360px)}
.mz-room .pillar{position:absolute;left:50%;top:22%;transform:translateX(-50%);width:28px;height:120px;background:linear-gradient(#3a4956,#222c35 60%,#1a232c);border:1px solid var(--panel-edge);border-radius:10px;box-shadow:0 18px 40px rgba(0,0,0,.45)}
.mz-room .stream{position:absolute;top:calc(50% - 40px);width:4px;height:180px;background:linear-gradient(180deg,rgba(190,230,255,0),rgba(190,230,255,.34),rgba(190,230,255,.10));filter:blur(.6px);animation:flow 1.4s linear infinite}
.mz-room .stream.s1{left:calc(50% - 40px)}.mz-room .stream.s2{left:50%}.mz-room .stream.s3{left:calc(50% + 40px)}
.mz-room .ripple{position:absolute;bottom:8%;left:35%;width:30%;aspect-ratio:1/.2;border-radius:50%;border:1px solid rgba(170,215,240,.32);filter:blur(.3px);animation:ripple 3.4s ease-out infinite;opacity:.7}
.mz-room .r1{animation-delay:0s}.mz-room .r2{animation-delay:1.1s}.mz-room .r3{animation-delay:2.2s}

/* beach overlays */
.mz-beach{position:absolute;inset:0}
.mz-beach .sea{position:absolute;left:0;right:0;bottom:12%;height:28%;overflow:hidden}
.mz-beach .wave{position:absolute;left:-30%;right:-30%;height:60%;opacity:.7;background:radial-gradient(ellipse at top,rgba(255,255,255,.55),transparent 60%);animation:wave 8s linear infinite}
.mz-beach .w1{top:0%;animation-duration:11s}.mz-beach .w2{top:15%;animation-duration:9s}.mz-beach .w3{top:28%;animation-duration:7s}

/* lake overlays */
.mz-lake{position:absolute;inset:0}
.mz-lake .water{position:absolute;left:0;right:0;bottom:16%;height:28%;overflow:hidden}
.mz-lake .ripple{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:20%;height:30%;border-radius:50%;border:1px solid rgba(160,205,225,.3);animation:lakeRipple 6s infinite ease-out}
.mz-lake .r1{animation-delay:0s}.mz-lake .r2{animation-delay:2s}.mz-lake .r3{animation-delay:4s}

/* creek overlays */
.mz-creek{position:absolute;inset:0}
.mz-creek .stream{position:absolute;left:0;right:0;bottom:16%;height:30%;overflow:hidden}
.mz-creek .flow{position:absolute;top:10%;bottom:10%;width:6%;background:linear-gradient(180deg,rgba(120,210,230,.18),rgba(120,210,230,.65) 40%,rgba(120,210,230,.18));filter:blur(.4px);animation:creekFlow 3.6s linear infinite}
.mz-creek .f0{left:10%}.mz-creek .f1{left:18%}.mz-creek .f2{left:26%}.mz-creek .f3{left:34%}.mz-creek .f4{left:42%}.mz-creek .f5{left:50%}.mz-creek .f6{left:58%}.mz-creek .f7{left:66%}

/* abstract overlays */
.mz-abstract{position:absolute;inset:0;display:grid;place-items:center}
.mz-abstract .swirl{position:absolute;width:140vmax;height:140vmax;background:conic-gradient(from 0deg,#1a1422,#253053,#1a1422,#253053,#1a1422);mix-blend-mode:screen;opacity:.12;animation:swirl 40s linear infinite;border-radius:50%}
.mz-abstract .s2{animation-duration:60s;opacity:.16}.mz-abstract .s3{animation-duration:80s;opacity:.1}.mz-abstract .s4{animation-duration:100s;opacity:.08}

/* candle wall */
.mz-candlewall{position:absolute;inset:0}
.mz-candlewall .wall-grid{position:absolute;left:6%;right:6%;bottom:10%;top:20%;display:grid;grid-template-columns:repeat(6,1fr);gap:16px 22px;align-content:end}
.mz-candlewall .tribute{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:6px 4px 10px;text-align:center;color:#eef2f7;font-size:12px}
.mz-candlewall .tribute .name{margin-bottom:6px;font-weight:700;text-shadow:0 2px 8px rgba(0,0,0,.5)}
.mz-candlewall .tribute .holder{display:grid;place-items:center;height:56px}
.mini-candle{position:relative;width:12px;height:28px}
.mini-candle .wax{width:12px;height:24px;background:linear-gradient(#fff,#f1f1f1);border-radius:4px}
.mini-candle .flame{position:absolute;left:50%;bottom:26px;transform:translateX(-50%);width:12px;height:16px;display:grid;place-items:center}
.mini-candle .glow{position:absolute;width:12px;height:16px;border-radius:50% 50% 60% 60%;background:radial-gradient(40% 45% at 50% 30%,var(--flame-outer),transparent 70%);filter:blur(.7px);opacity:.95;animation:flicker 1.8s infinite}
.mini-candle .core{width:6px;height:9px;border-radius:40% 40% 60% 60%;background:radial-gradient(circle at 50% 35%,#fff 22%,var(--flame-core) 60%,transparent 72%)}
.mz-candlewall .add{position:absolute;right:14px;bottom:14px}

/* stats bar */
.mz-statsbar{display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:flex-start;border:1px solid var(--panel-edge);border-radius:12px;padding:10px;background:var(--panel-bg)}
.mz-statbox{min-width:140px;background:rgba(255,255,255,.05);border:1px solid var(--panel-edge);border-radius:10px;padding:10px 14px}
.mz-statbox .n{font-size:20px;font-weight:800}
.mz-statbox .t{font-size:11px;opacity:.9}
.mz-linksbar{margin-left:auto;font-size:12px}
.mz-link{color:#d7c69b;text-decoration:underline}

/* animations */
@keyframes sway{0%{transform:rotate(.8deg)}50%{transform:rotate(-.8deg)}100%{transform:rotate(.8deg)}}
@keyframes flicker{0%,100%{opacity:.85;transform:scaleY(1)}40%{opacity:.95;transform:scaleY(1.06)}60%{opacity:.75;transform:scaleY(.96)}}
@keyframes flow{0%{transform:translateY(-40%);opacity:0}15%{opacity:1}85%{opacity:1}100%{transform:translateY(50%);opacity:0}}
@keyframes ripple{0%{transform:scale(.6);opacity:.5}100%{transform:scale(1.2);opacity:0}}
@keyframes wave{0%{transform:translateX(0)}100%{transform:translateX(30%)}}
@keyframes lakeRipple{0%{transform:translate(-50%,-50%) scale(.7);opacity:.7}100%{transform:translate(-50%,-50%) scale(1.35);opacity:0}}
@keyframes creekFlow{0%{transform:translateY(-20%)}100%{transform:translateY(40%)}}
@keyframes swirl{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
